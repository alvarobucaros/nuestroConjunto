import{r as l,j as e,V as E,a as M,U as I}from"./app-Cegcm5kP.js";import{A as T}from"./AuthenticatedLayout-DtXB4yAw.js";import{d as h}from"./index-BfQLVr1a.js";import{M as A}from"./Modal-DRG4MLRd.js";import{S as L}from"./sweetalert2.esm.all-B0Dix5B2.js";import{P as O}from"./Pagination-D1wEGoFR.js";import{M as k}from"./MiInput-CEkF_wN6.js";import{M as D}from"./MiLista-PpBLvJ2v.js";import{M as P}from"./MiTextArea-iPUdR226.js";import"./transition-CxfPntE9.js";function R({Id:o,Label:p,data:d,listas:t=[],OnChange:u,required:c}){return l.useState(d||""),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700",children:[p," "]}),e.jsxs("select",{id:o,name:o,value:d,onChange:u,required:c,className:"w-full px-1 py-1 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm disabled:bg-gray-100 'border-gray-300'}",children:[e.jsx("option",{value:"",children:"Selecione una opción"}),t.map(i=>e.jsx("option",{value:i.id,children:i.opcion},i.id))]})]})}function se(o){const p=E().props.auth.user,[d,t]=l.useState(!1),[u,c]=l.useState(""),[i,j]=l.useState(1),{data:a,setData:m,delete:q,post:U,put:G,processing:f,reset:z,errors:B}=M({id:"",pos_grupo_id:"",pos_titulo:"",pos_descripcion:"",pos_imagen:"",pos_estado:"A"}),[y,F]=l.useState(o.grupos),[N,$]=l.useState(p.role),b=s=>{t(!0),j(s),s===1?(c("Añadir post"),m({pos_grupo_id:"",pos_titulo:"",pos_descripcion:"",pos_imagen:"postcolor",pos_estado:"A"})):c("Modificar post")},_=()=>{t(!1)},v=[{value:"",label:"-- Selecciona un estado --"},{value:"Actual",label:"Actulidad"},{value:"Info",label:"Informativo"},{value:"Espec",label:"Especial"}],S=s=>{if(s.preventDefault(),i===1)try{const r=h.Inertia.post("/post",a);alert("Datos actualizados exitosamente")}catch(r){console.error("Error al crear el post:",r)}else{try{const r=h.Inertia.put(`/post/${a.id}`,a);alert("Datos actualizados exitosamente"),console.log("Respuesta:",r)}catch(r){console.error("Error al actualizar el post:",r)}t(!1)}},w=(s,r)=>{L.mixin({buttonsStyling:!0}).fire({title:"Seguro de eliminar el post "+s+" "+r,text:"Se perderá el post",icon:"question",showCancelButton:!0,confirmButtonText:'<i class="fa-solid fa-check"></i> Si, eliminar',cancelButtonText:'<i class="fa-solid fa-ban"></i>No, Cancelar'}).then(x=>{x.isConfirmed&&h.Inertia.delete(`/post/${s}`,{onSuccess:()=>{alert("post eliminado exitosamente.")},onError:C=>{console.error("Error al eliminar el post:",C)}})})};function n(s){const{name:r,value:g}=s.target;m(x=>({...x,[r]:g}))}return e.jsx(T,{auth:o.auth,errors:o.errors,children:e.jsxs("div",{className:"p-6",children:[N!=="User"&&e.jsx(e.Fragment,{children:e.jsx("button",{className:"bg-blue-500 text-white px-4 py-1 rounded mb-4",onClick:()=>b(1),children:" Crear Post"})}),e.jsx(I,{href:"/mimenu",className:"bg-green-500 text-white px-4 py-1 mx-4 rounded mb-4",children:" Regreso"}),e.jsx("span",{className:"bg-blue-100",children:" POSTS "}),e.jsxs("div",{className:"bg-white grid v-screen place-items-center py-1",children:[e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-2 py-1",children:"#"}),e.jsx("th",{className:"px-2 py-1",children:"GRUPO"}),e.jsx("th",{className:"px-2 py-1",children:"TITULO"}),e.jsx("th",{className:"px-2 py-1",children:"DETALLE"}),e.jsx("th",{className:"px-2 py-1",children:"ESTADO"}),e.jsx("th",{className:"px-2 py-1",colSpan:2})]})}),e.jsx("tbody",{children:o.posts.data.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.id}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.grp_titulo}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.pos_titulo}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.pos_descripcion}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.pos_estado}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("button",{className:"bg-yellow-500 text-white px-2 py-1 rounded",onClick:()=>{m(s),b(0)},children:"Editar"})}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-1 rounded",onClick:()=>w(s.id,s.grp_titulo+" - "+s.pos_titulo),children:"Eliminar"})})]},s.id))})]}),e.jsx(O,{class:"mt-6",links:o.posts.links})]}),e.jsxs(A,{show:d,onClose:_,children:[e.jsx("h2",{className:"p-3 text-lg font-medium text-gray-900",children:u}),e.jsx("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto transform transition-all duration-300 ease-in-out scale-100",children:e.jsx("form",{onSubmit:S,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(R,{Id:"pos_grupo_id",Label:"Grupo",data:a.pos_grupo_id,listas:y,OnChange:n,required:!0}),e.jsx(k,{Id:"pos_titulo",Type:"text",Label:"Titulo Post",onChange:n,classNameI:"md:col-span-2",maxLength:"50",data:a.pos_titulo,required:!0,OnChange:n}),e.jsx(P,{Id:"pos_descripcion",Rows:"2",Cols:"120",Label:"Detalles",classNameI:"md:col-span-2",data:a.pos_descripcion,required:!0,OnChange:n}),e.jsx("br",{}),e.jsx(D,{Id:"pos_estado",Label:"Estado",classNameI:"md:col-span-2",data:a.pos_estado,options:v,OnChange:n,required:!0}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",className:"mx-4 bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-1 rounded",onClick:()=>t(!1),children:"Cancelar"}),e.jsx("button",{processing:f,className:"mx-4 bg-blue-500 hover:bg-blue-700 text-white font-bold mx-3 py-1 px-1 rounded",children:"Guardar"})]})]})})})]})]})})}export{se as default};
