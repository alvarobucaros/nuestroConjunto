import{V as P,r as l,a as T,j as e,M as D,U as I}from"./app-Cegcm5kP.js";import{A as R}from"./AuthenticatedLayout-DtXB4yAw.js";import{d as H}from"./index-BfQLVr1a.js";import{M}from"./Modal-DRG4MLRd.js";import{S as F}from"./sweetalert2.esm.all-B0Dix5B2.js";import{P as U}from"./Pagination-D1wEGoFR.js";import"./transition-CxfPntE9.js";function ae(t,n){const i=P().props.auth.user,[m,r]=l.useState(!1),[x,h]=l.useState(""),[L,u]=l.useState(1),[p,b]=l.useState(n.search||""),[o,B]=l.useState(new Date().toISOString().slice(0,10));l.useState(""),l.useState(null);const{data:s,setData:c,delete:$,post:g,put:j,processing:G,reset:q,errors:V}=T({id:"",cla_estado:"",cla_grafica:"",cla_titulo:"",cla_detalle:"",cla_nombre:"",cla_apellido:"",cla_telefonos:"",cla_email:"",cla_fchPublicacion:"",cla_fchHasta:""}),N={id:"",cla_grafica:"",cla_titulo:"",cla_detalle:"",cla_nombre:"",cla_apellido:"",cla_telefonos:"",cla_email:"",cla_fchPublicacion:"",cla_fchHasta:"",cla_estado:""};l.useState(t.conjunto),l.useState(N);const[d,z]=l.useState(i.acceso),y=a=>{r(!0),u(a),h("Aprobar un clasificado")},f=()=>{r(!1)};l.useState(!1);const _={P:"Presentado",A:"Aprobado"},S=a=>{a.preventDefault(),s.id>0?j(route("clasificados.update",s.id),{data:s,onSuccess:()=>{alert("Datos del formulario actualizados."),r(!1)}}):g(route("clasificados.store"),{data:s,onSuccess:()=>alert("Clasificado creado")})},v=(a,w,A,C,k)=>{F.mixin({buttonsStyling:!0}).fire({title:"Seguro de eliminar este registro "+w+" "+A+" de "+C+" "+k,text:"Se perderá el registro",icon:"question",showCancelButton:!0,confirmButtonText:'<i class="fa-solid fa-check"></i> Si, eliminar',cancelButtonText:'<i class="fa-solid fa-ban"></i>No, Cancelar'}).then(E=>{E.isConfirmed&&H.Inertia.delete(`/clasificados/${a}`,{onSuccess:()=>{alert("registro eliminado exitosamente.")},onError:O=>{console.error("Error al eliminar el registro:",O)}})})};return e.jsxs(R,{auth:t.auth,conjunto:t.conjunto,children:[e.jsx("div",{className:"mb-6 text-center",children:e.jsx(D,{title:"Clasificados"})}),e.jsx(I,{href:"/mimenu",className:"bg-green-400 text-white px-4 py-1 mx-4 rounded mb-4",children:" Regreso"}),e.jsx("input",{type:"text",placeholder:"Buscar por título o detalle...",value:p,onChange:a=>b(a.target.value),className:"border rounded px-2 py-1 mb-4"}),e.jsxs("span",{className:"mx-10 mt-2 text-blue-500 font-bold text-sm text-center",children:[" CLASIFICADOS PENDIENTES POR AUTORIZAR A HOY:  ",o," "]}),e.jsxs("div",{className:"bg-white grid v-screen place-items-center py-1 text-xs",children:[e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-2 py-1",children:"#"}),e.jsx("th",{className:"px-2 py-1",children:"TITULO"}),e.jsx("th",{className:"px-2 py-1",children:"DETALLE"}),e.jsx("th",{className:"px-2 py-1",children:"USUAIO"}),e.jsx("th",{className:"px-2 py-1",children:"TELEFONO"}),e.jsx("th",{className:"px-2 py-1",children:"CORREO"}),e.jsx("th",{className:"px-2 py-1",children:"FECHA"}),e.jsx("th",{className:"px-2 py-1",children:"HASTA"}),e.jsx("th",{className:"px-2 py-1",children:"ESTADO"}),e.jsx("th",{className:"px-2 py-1",children:"GRAFICA"}),d!=="super"&&e.jsx("th",{className:"px-2 py-1",colSpan:2,children:"COMANDOS"})]})}),e.jsx("tbody",{children:t.clasificados.data.map(a=>e.jsxs("tr",{className:"text-xs",children:[e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:[a.id," "]}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:[a.cla_titulo," "]}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:a.cla_detalle}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:[a.cla_nombre,"  ",a.cla_apellido]}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:a.cla_telefonos}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:[a.cla_email,"  "]}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:[a.cla_fchPublicacion,"  "]}),e.jsx("td",{className:`border border-gray-400 px-2 py-1 ${o>a.cla_fchHasta?"text-red-500 font-semibold":""}`,children:a.cla_fchHasta}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:a.cla_grafica?e.jsx("img",{src:`/images/${a.cla_grafica}`,alt:"Ver Imagen",style:{width:"40px",height:"40px"}}):e.jsx("span",{})}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:_[a.cla_estado]||"Desconocido"}),d!=="C"&&e.jsxs(e.Fragment,{children:[" ",e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("button",{className:"bg-gray-400 hover:bg-gray-700 text-white px-2 py-1 rounded",onClick:()=>{c(a),y(0)},children:"Editar"})}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("button",{className:"bg-red-400 hover:bg-red-700 text-white font-bold py-1 px-1 rounded",onClick:()=>v(a.id,a.cla_titulo,a.cla_detalle,a.cla_nombre,a.cla_apellido),children:"Eliminar"})})]})]},a.id))})]}),e.jsx(U,{class:"mt-6",links:t.clasificados.links})]}),e.jsxs(M,{show:m,onClose:f,children:[e.jsx("h2",{className:"mt-2 text-blue-500 font-bold text-sm text-center",children:x}),e.jsx("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto transform transition-all duration-300 ease-in-out scale-100",children:e.jsx("form",{onSubmit:S,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:s.cla_grafica&&e.jsx("img",{src:`/images/${s.cla_grafica}`,alt:"Gráfica a cargar",className:"h-20 w-32 aspect-square focus:ring-4"})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-500",children:" Título "}),e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[" ",s.cla_titulo," "]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-500",children:" Detalle "}),e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[" ",s.cla_detalle," "]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-500",children:" Usuario "}),e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[" ",s.cla_nombre,"   ",s.cla_apellido]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-500",children:" Teléfono y Correo "}),e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[" ",s.cla_telefonos,"  ",s.cla_email,"  "]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-500",children:" Fecha publicación "}),e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[" ",s.cla_fchPublicacion]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-2",children:[e.jsxs("label",{className:"flex p-3 w-full bg-white border rounded-lg",children:[e.jsx("input",{type:"radio",name:"cla_estado",value:"P",checked:s.cla_estado==="P",onChange:a=>c("cla_estado",a.target.value),className:"shrink-0 mt-0.5"}),e.jsx("span",{className:"ms-3",children:"Presentado"})]}),e.jsxs("label",{className:"flex p-3 w-full bg-white border rounded-lg",children:[e.jsx("input",{type:"radio",name:"cla_estado",value:"A",checked:s.cla_estado==="A",onChange:a=>c("cla_estado",a.target.value),className:"shrink-0 mt-0.5"}),e.jsx("span",{className:"ms-3",children:"Aprobado"})]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-1 rounded",children:"Guardar"}),e.jsx("button",{type:"button",className:"mx-2 bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-1 rounded",onClick:()=>r(!1),children:" Cancelar"})]})]})})})]})]})}export{ae as default};
