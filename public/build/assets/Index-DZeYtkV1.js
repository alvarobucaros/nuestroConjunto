import{r as d,j as e,V as L,a as E,U as O}from"./app-Cegcm5kP.js";import{A as M}from"./AuthenticatedLayout-DtXB4yAw.js";import{d as b}from"./index-BfQLVr1a.js";import{M as R}from"./Modal-DRG4MLRd.js";import{S as U}from"./sweetalert2.esm.all-B0Dix5B2.js";import{P as k}from"./Pagination-D1wEGoFR.js";import{M as u}from"./MiInput-CEkF_wN6.js";import"./transition-CxfPntE9.js";function _({Id:o,Label:n,data:c,options:l=[],OnChange:x,required:m}){return d.useState(c||""),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700",children:[n," "]}),e.jsx("select",{id:o,name:o,value:c,onChange:x,required:m,className:"w-full px-1 py-1 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm disabled:bg-gray-100 'border-gray-300'}",children:l.map(i=>e.jsx("option",{value:i.label,children:i.label},i.value))})]})}function Q(o){const n=L().props.auth.user,[c,l]=d.useState(!1),[x,m]=d.useState(""),[i,f]=d.useState(1),{data:r,setData:p,delete:T,post:A,put:D,processing:y,reset:q,errors:B}=E({conjunto_id:n.conjunto_id,name:"",email:"",email_verified_at:"null",password:"",password2:"",role:"User",remember_token:"null"}),[N,P]=d.useState(n.role),g=a=>{l(!0),f(a),a===1?(m("Añadir usuario"),p({conjunto_id:n.conjunto_id,name:"",email:"",email_verified_at:"null",password:"",role:"User",remember_token:"null"})):m("Modificar usuario")},w=()=>{l(!1)},v=[{value:"",label:"-- Selecciona un privilegio --"},{value:"A",label:"Admin"},{value:"S",label:"Super"},{value:"U",label:"User"}],C=a=>{if(a.preventDefault(),r.password!==r.password2){alert("Las contraseñas no coinciden. Reviselas");return}if(i===1)try{const t=b.Inertia.post("/user",r);alert("Datos actualizados exitosamente")}catch(t){console.error("Error al crear el usuario:",t)}else{try{const t=b.Inertia.put(`/user/${r.id}`,r);alert("Datos actualizados exitosamente")}catch(t){console.error("Error al actualizar el usuario:",t)}l(!1)}},S=(a,t)=>{U.mixin({buttonsStyling:!0}).fire({title:"Seguro de eliminar el usuario "+a+" "+t,text:"Se perderá el usuario",icon:"question",showCancelButton:!0,confirmButtonText:'<i class="fa-solid fa-check"></i> Si, eliminar',cancelButtonText:'<i class="fa-solid fa-ban"></i>No, Cancelar'}).then(h=>{h.isConfirmed&&b.Inertia.delete(`/user/${a}`,{onSuccess:()=>{alert("Usuario eliminado exitosamente.")},onError:I=>{console.error("Error al eliminar el usuario:",I)}})})};function s(a){const{name:t,value:j}=a.target;p(h=>({...h,[t]:j}))}return e.jsx(M,{auth:o.auth,errors:o.errors,children:e.jsxs("div",{className:"p-6",children:[N!=="User"&&e.jsx(e.Fragment,{children:e.jsx("button",{className:"bg-blue-500 text-white px-4 py-1 rounded mb-4",onClick:()=>g(1),children:" Crear User"})}),e.jsx(O,{href:"/mimenu",className:"bg-green-500 text-white px-4 py-1 mx-4 rounded mb-4",children:" Regreso"}),e.jsx("span",{className:"bg-blue-100",children:" ADMINISTRADORES DEL BLOG "}),e.jsxs("div",{className:"bg-white grid v-screen place-items-center py-1",children:[e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-2 py-1",children:"#"}),e.jsx("th",{className:"px-2 py-1",children:"NOMBRE"}),e.jsx("th",{className:"px-2 py-1",children:"CORREO"}),e.jsx("th",{className:"px-2 py-1",children:"PRIVILEGIO"}),e.jsx("th",{className:"px-2 py-1",colSpan:2})]})}),e.jsx("tbody",{children:o.users.data.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:a.id}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:a.name}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:a.email}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:a.role}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("button",{className:"bg-yellow-500 text-white px-2 py-1 rounded",onClick:()=>{p(a),g(0)},children:"Editar"})}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-1 rounded",onClick:()=>S(a.id,a.name),children:"Eliminar"})})]},a.id))})]}),e.jsx(k,{class:"mt-6",links:o.users.links})]}),e.jsxs(R,{show:c,onClose:w,children:[e.jsx("h2",{className:"p-3 text-lg font-medium text-gray-900",children:x}),e.jsx("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto transform transition-all duration-300 ease-in-out scale-100",children:e.jsx("form",{onSubmit:C,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(u,{Id:"name",Type:"text",Label:"Nombre usuario",onChange:s,classNameI:"md:col-span-2",maxLength:"100",data:r.name,required:!0,OnChange:s}),e.jsx(u,{Id:"email",Type:"email",Label:"Correo",onChange:s,classNameI:"md:col-span-2",maxLength:"100",data:r.email,required:!0,OnChange:s}),e.jsx(_,{Id:"role",Label:"Priviledio",data:r.role,options:v,OnChange:s,required:!0}),e.jsx(u,{Id:"password",Type:"password",Label:"Contraseña",onChange:s,classNameI:"md:col-span-2",maxLength:"100",data:r.password,required:!0,OnChange:s}),e.jsx(u,{Id:"password2",Type:"password",Label:"Repite Contraseña",onChange:s,classNameI:"md:col-span-2",maxLength:"100",data:r.password2,required:!0,OnChange:s}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-1 rounded",onClick:()=>l(!1),children:"Cancelar"}),e.jsx("button",{processing:y,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold mx-3 py-1 px-1 rounded",children:"Guardar"})]})]})})})]})]})})}export{Q as default};
