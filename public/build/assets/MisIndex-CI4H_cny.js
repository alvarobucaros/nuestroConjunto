import{j as e,V as E,r as n,a as O,M as C,U as w}from"./app-Cegcm5kP.js";import{A as D}from"./AuthenticatedLayout-DtXB4yAw.js";import{d as N}from"./index-BfQLVr1a.js";import"./sweetalert2.esm.all-B0Dix5B2.js";import{P}from"./Pagination-D1wEGoFR.js";import{M}from"./MiModal-Di5HCYJY.js";import{M as A}from"./MiTextArea-iPUdR226.js";function y({estados:o,selected:c,OnChange:t,Name:m,Label:h}){return e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[h," "]}),e.jsx("div",{className:"flex space-x-6",children:Object.entries(o).map(([r,l])=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:`option${r}`,name:m,value:r,checked:c===r,onChange:t,className:"peer appearance-none h-4 w-4 border border-gray-300 rounded-full bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition-all duration-200"}),e.jsx("label",{htmlFor:`option${r}`,className:"ml-2 text-gray-700 cursor-pointer",children:l})]},r))})]})}function K(o){const c=E().props.auth.user,[t,m]=n.useState(c.acceso),[h,r]=n.useState(!1);n.useState(""),n.useState(1);const[l,T]=n.useState(o.conjunto),[g,d]=n.useState(!1);n.useState(!1);const{data:a,setData:i,delete:I,post:k,put:F,processing:U,reset:L,errors:$}=O({id:"",con_nombres:"",con_apellidos:"",con_tipopqr:"",con_email:"",con_telefono:"",con_mensaje:"",con_soportepdf:"",con_secuencia:"",con_fechaRecibo:"",con_estado:"",con_respuesta:"",con_fechaRespuesta:"",con_radicado:"",con_enviar:"N"}),j={I:"Iniciado",P:"Pendiente",T:"Terminado"},f={S:"Si, enviar",N:"NO"},b={P:"PeticiÃ³n",Q:"Queja",R:"Reclamo",S:"Solicitud"},_=s=>{s.preventDefault();{a.con_enviar="N";try{const x=N.Inertia.put(`/contactos/${a.id}`,a);alert("Datos actualizados exitosamente")}catch{}r(!1)}},p=s=>{const{name:x,value:v}=s.target;i(S=>({...S,[x]:v}))},R=()=>{d(!1);try{const s=N.Inertia.put(`/contactos/${a.id}`,a);alert("Datos actualizados exitosamente")}catch{}},u=s=>{s.con_soportepdf?window.open(`/anexos/${s.con_soportepdf}`,"_blank"):alert("no muestra")};return e.jsxs(D,{conjunto:l,children:[e.jsx(C,{title:"asuntos"}),e.jsxs("div",{className:"p-6",children:[e.jsx(w,{href:"/mimenu",className:"bg-green-400 text-white px-4 py-1 mx-4 rounded mb-4",children:" Regreso"}),e.jsx("span",{className:"mt-2 text-blue-400 text-sm text-center",children:" ASUNTOS POR RESOLVER "}),"  ",t,e.jsxs("div",{className:"bg-white grid v-screen place-items-center py-1 text-xs",children:[e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-2 py-1",children:"#"}),e.jsx("th",{className:"px-2 py-1",children:"NOMBRE"}),e.jsx("th",{className:"px-2 py-1",children:"CORREO"}),e.jsx("th",{className:"px-2 py-1",children:"TELEFONO"}),e.jsx("th",{className:"px-2 py-1",children:"FECHA"}),e.jsx("th",{className:"px-2 py-1",children:"MENSAJE"}),e.jsx("th",{className:"px-2 py-1",children:"SOPORTE"}),e.jsx("th",{className:"px-2 py-1",children:"RESPUESTA"}),e.jsx("th",{className:"px-2 py-1",children:"FCH RESPUIESTA"}),e.jsx("th",{className:"px-2 py-1",children:"ESTADO"}),e.jsx("th",{className:"px-2 py-1",children:"TIPO"}),e.jsx("th",{className:"px-2 py-1",children:"COMANDO"})]})}),e.jsx("tbody",{children:o.contactos.data.map(s=>e.jsxs("tr",{className:"text-xs",children:[e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.id}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:[s.con_nombres," ",s.con_apellidos]}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.con_email}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.con_telefono}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.con_fechaRecibo}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:[s.con_mensaje.substring(0,150)," "]}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.con_soportepdf?e.jsx("div",{onClick:()=>{u(s)},style:{cursor:"pointer"},children:e.jsx("img",{src:"../images/pdf.jpg",alt:"Ver PDF",style:{width:"30px",height:"30px"}})}):e.jsx("span",{})}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:s.con_respuesta}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:[s.con_fechaRespuesta," "]}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:j[s.con_estado]||"Desconocido"}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:b[s.con_tipopqr]||"Desconocido"}),t!=="super"&&e.jsx(e.Fragment,{children:e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("button",{onClick:()=>{i(s),i(s.con_enviar="N"),d(!0)},className:"bg-blue-600 text-white px-2 py-1 rounded",children:"Resolver"})})})]},s.id))})]}),e.jsx(P,{class:"mt-6",links:o.contactos.links})]}),e.jsx(M,{isOpen:g,onClose:()=>d(!1),onUpdate:R,children:e.jsx("div",{className:"bg-gray-200 rounded-lg shadow-lg",children:e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"",children:[e.jsxs("p",{className:"mb-2",children:[" ",e.jsxs("span",{className:" font-bold ",children:[b[a.con_tipopqr]||"Desconocido"," De "]}),a.con_nombres," ",a.con_apellidos,e.jsx("span",{className:" font-bold  mx-2",children:"Radicado"}),"  ",a.con_radicado," ",e.jsx("span",{className:" font-bold",children:" De "})," ",a.con_fechaRecibo]}),e.jsxs("p",{className:"mb-2",children:["  ",e.jsx("span",{className:" font-bold  ",children:"Mensaje"}),"  ",a.con_mensaje]}),e.jsxs("p",{children:["  ",a.con_soportepdf?e.jsx("div",{onClick:()=>{u(a)},style:{cursor:"pointer"},children:e.jsx("img",{src:"../images/pdf.jpg",alt:"Ver PDF",style:{width:"30px",height:"30px"}})}):e.jsx("span",{})]})]}),e.jsx(A,{Id:"con_respuesta",Rows:"10",Cols:"8",Label:"Respuesta",classNameI:"",data:a.con_respuesta,OnChange:p}),e.jsx(y,{estados:j,selected:a.con_estado,OnChange:p,Label:"Estado",Name:a.con_estado}),e.jsx(y,{estados:f,selected:a.con_enviar,OnChange:p,Label:"Enviar Correo",Name:a.con_enviar})]})})})]})]})}export{K as default};
