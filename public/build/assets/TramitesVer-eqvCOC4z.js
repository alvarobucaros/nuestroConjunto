import{V as M,r,a as I,h as R,j as e,M as w,U as O}from"./app-Cegcm5kP.js";import{A as P}from"./AuthenticatedLayout-DtXB4yAw.js";import{d as p}from"./index-BfQLVr1a.js";import{M as L}from"./MiModal-Di5HCYJY.js";import{S as U}from"./sweetalert2.esm.all-B0Dix5B2.js";import{P as k}from"./Pagination-D1wEGoFR.js";import{M as q}from"./MiInput-CEkF_wN6.js";import{M as z}from"./MiTextArea-iPUdR226.js";function le(o,j){const b=M().props.auth.user,[B,f]=r.useState(!1),[y,F]=r.useState("");r.useState(1);const[l,N]=r.useState(j.search||""),[$,_]=r.useState("");r.useState(null);const{data:s,setData:x,delete:H,post:V,put:Z,processing:G,reset:J,errors:K}=I({id:"",tra_nombre:"",tra_apellido:"",tra_direccion:"",tra_ciudad:"",tra_tipodoc:"",tra_nrodoc:"",tra_telefono:"",tra_email:"",tra_texto:"",tra_radicado:"",tra_fechaevento:"",tra_fechasolicitud:"",tra_horadesde:"",tra_horahasta:"",tra_observaciones:"",tra_estado:"",tra_fecharespuesta:"",tra_opcion:""}),g=()=>{const a=new Date().toISOString().split("T")[0];_(a),s.tra_fecharespuesta=a};r.useEffect(()=>{if(l){const a=setTimeout(()=>{R.get("/tramites",{search:l},{preserveState:!0,replace:!0})},500);return()=>clearTimeout(a)}},[l]),r.useEffect(()=>{g()},[]),r.useState(o.conjunto);const[h,Q]=r.useState(b.acceso),[S,c]=r.useState(!1);r.useState(!1);const v={P:"Presentado",C:"Cerrado"},n={S:"Parqueadero u otros",T:"Solicitud de trasteo",A:"Alquiler de salones",P:"Paz y Salvo"},d=a=>{const{name:t,type:m,value:i,files:u}=a.target;x(t,i)},C=()=>{c(!1);try{const a=p.Inertia.put(`/tramites/${s.id}`,s);alert("Datos actualizados exitosamente")}catch{}},T=a=>{a.preventDefault();{try{const t=p.Inertia.put(`/tramites/${s.id}`,s);alert("Datos actualizados exitosamente")}catch(t){console.error("Error al actualizar el tramites:",t)}f(!1)}},E=(a,t,m,i,u)=>{U.mixin({buttonsStyling:!0}).fire({title:"Seguro de eliminar el tramite "+t+" "+m+" de "+i+" "+u,text:"Se perderá el tramite",icon:"question",showCancelButton:!0,confirmButtonText:'<i class="fa-solid fa-check"></i> Si, eliminar',cancelButtonText:'<i class="fa-solid fa-ban"></i>No, Cancelar'}).then(A=>{A.isConfirmed&&p.Inertia.delete(`/tramites/${a}`,{onSuccess:()=>{alert("grupo eliminado exitosamente.")},onError:D=>{console.error("Error al eliminar el grupo:",D)}})})};return e.jsx(P,{conjunto:o.conjunto,children:e.jsxs("div",{children:[e.jsx(w,{title:"tramites"}),e.jsxs("div",{className:"p-6",children:[e.jsx(O,{href:"/mimenu",className:"bg-green-400 text-white px-4 py-1 mx-4 rounded mb-4",children:" Regreso"}),e.jsx("input",{type:"text",placeholder:"Buscar por usuario..",value:l,onChange:a=>N(a.target.value),className:"border rounded px-2 py-1 mb-4"}),e.jsx("span",{className:"mx-10 mt-2 text-blue-500 font-bold text-sm text-center",children:" TRAMITES PENDIENTES POR REALIZAR "}),e.jsx("div",{className:"relative"}),e.jsxs("div",{className:"bg-white grid v-screen place-items-center py-1 text-xs",children:[e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-2 py-1",children:"#"}),e.jsx("th",{className:"px-2 py-1",children:"TRAMITE"}),e.jsx("th",{className:"px-2 py-1",children:"RADICADO"}),e.jsx("th",{className:"px-2 py-1",children:"FCH CREA"}),e.jsx("th",{className:"px-2 py-1",children:"USUARIO"}),e.jsx("th",{className:"px-2 py-1",children:"DOCUMENTO"}),e.jsx("th",{className:"px-2 py-1",children:"DETALLES"}),e.jsx("th",{className:"px-2 py-1",children:"ESTADO"}),h!=="super"&&e.jsx("th",{className:"px-2 py-1",colSpan:2,children:"COMANDOS"})]})}),e.jsx("tbody",{children:o.tramites.data.map(a=>e.jsxs("tr",{className:"text-xs",children:[e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:[a.id," "]}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:[n[a.tra_opcion],"    "]}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:a.tra_radicado}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:a.tra_fechasolicitud}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:[a.tra_nombre,"  ",a.tra_apellido]}),e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:[a.tra_tipodoc,"  ",a.tra_nrodoc]}),a.tra_opcion==="A"?e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:[a.tra_texto,"   el dia ",a.tra_fechaevento," desde las ",a.tra_horadesde," hasta ",a.tra_horahasta]}):a.tra_opcion==="T"?e.jsxs("td",{className:"border border-gray-400 px-2 py-1",children:[a.tra_texto,"  el dia ",a.tra_fechaevento]}):e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:a.tra_texto}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:v[a.tra_estado]||"Desconocido"}),h!=="C"&&e.jsxs(e.Fragment,{children:[" ",e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("button",{className:"bg-gray-400 hover:bg-gray-700 text-white px-2 py-1 rounded",onClick:()=>{x(a),c(!0)},children:"Procesar"})}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("button",{className:"bg-red-400 hover:bg-red-700 text-white font-bold py-1 px-1 rounded",onClick:()=>E(a.id,a.tra_radicado,n[a.tra_opcion],a.tra_nombre,a.tra_apellido),children:"Eliminar"})})]})]},a.id))})]}),e.jsx(k,{class:"mt-6",links:o.tramites.links})]}),e.jsxs(L,{isOpen:S,onClose:()=>c(!1),onUpdate:C,children:[e.jsx("h2",{className:"mt-2 text-blue-500 font-bold text-sm text-center",children:y}),e.jsx("div",{className:"bg-gray-200 rounded-lg shadow-lg",children:e.jsx("form",{onSubmit:T,children:e.jsxs("div",{className:"",children:[e.jsxs("p",{className:"mb-2  px-2 py-1",children:[" ",e.jsxs("span",{className:" font-bold ",children:[n[s.tra_opcion]||"Desconocido","   Trámite De "]}),s.tra_nombre," ",s.tra_apellido,e.jsx("span",{className:" font-bold  px-2 py-1 mx-2",children:"Radicado"}),"  ",s.tra_radicado," ",e.jsx("span",{className:" font-bold",children:" De "})," ",s.tra_fechasolicitud]}),s.tra_opcion==="A"?e.jsxs("p",{className:" px-2 py-1",children:[" ",e.jsx("span",{className:" font-bold  ",children:"Mensaje : "})," ",s.tra_texto,"   el dia ",s.tra_fechaevento,"     desde las ",s.tra_horadesde," hasta ",s.tra_horahasta]}):s.tra_opcion==="T"?e.jsxs("p",{className:" px-2 py-1",children:[" ",e.jsx("span",{className:" font-bold  ",children:"Mensaje : "})," ",s.tra_texto,"  el dia ",s.tra_fechaevento]}):e.jsxs("p",{className:" px-2 py-1",children:[" ",e.jsx("span",{className:" font-bold  ",children:"Mensaje : "})," ",s.tra_texto]}),e.jsxs("p",{className:" px-2 py-1",children:[" ",e.jsx("span",{className:" font-bold  ",children:"Datos del solicitante : "})]}),e.jsxs("div",{className:"flex flex-row items-center gap-4 ",children:[e.jsx("p",{className:" px-10 py-1",children:" Telefono : "}),e.jsxs("p",{className:"",children:["  ",s.tra_telefono]})]}),e.jsxs("div",{className:"flex flex-row items-center gap-4 ",children:[e.jsx("p",{className:" px-10 py-1",children:" Correo : "}),e.jsxs("p",{className:"",children:["  ",s.tra_email]})]}),e.jsx("hr",{}),e.jsx(q,{Id:"tra_fecharespuesta",Type:"date",Label:"Fecha Respuesta",onChange:d,classNameI:"md:col-span-2",maxLength:"100",data:s.tra_fecharespuesta,required:!0,OnChange:d}),e.jsx(z,{Id:"tra_observaciones",Rows:"10",Cols:"4",Label:"Respuesta",classNameI:"",data:s.tra_observaciones,OnChange:d})]})})})]})]})]})})}export{le as default};
