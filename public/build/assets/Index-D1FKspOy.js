import{V as E,r as n,a as I,j as e,U as T}from"./app-Cegcm5kP.js";import{A as L}from"./AuthenticatedLayout-DtXB4yAw.js";import{d as p}from"./index-BfQLVr1a.js";import{M}from"./Modal-DRG4MLRd.js";import{S as A}from"./sweetalert2.esm.all-B0Dix5B2.js";import{P as O}from"./Pagination-D1wEGoFR.js";import{M as g}from"./MiInput-CEkF_wN6.js";import{M as D}from"./MiLista-PpBLvJ2v.js";import"./transition-CxfPntE9.js";function W(o){const i=E().props.auth.user,[b,l]=n.useState(!1),[j,u]=n.useState(""),[f,y]=n.useState(1),{data:a,setData:d,delete:k,post:U,put:G,processing:N,reset:q,errors:P}=I({id:"",grp_conjunto_id:i.conjunto_id,grp_titulo:"",grp_detalle:"",grp_estado:"A"}),[x,R]=n.useState(i.role),m=r=>{l(!0),y(r),r===1?(u("Añadir grupo"),d({grp_conjunto_id:i.conjunto_id,grp_titulo:"",grp_detalle:"",grp_estado:"A"})):u("Modificar grupo")},_=()=>{l(!1)},v=[{value:"",label:"-- Selecciona un estado --"},{value:"A",label:"Activo"},{value:"I",label:"Inactivo"}],S=r=>{if(r.preventDefault(),f===1)try{const t=p.Inertia.post("/grupo",a);alert("Datos actualizados exitosamente")}catch(t){console.error("Error al crear el grupo:",t)}else{try{const t=p.Inertia.put(`/grupo/${a.id}`,a);alert("Datos actualizados exitosamente")}catch(t){console.error("Error al actualizar el grupo:",t)}l(!1)}},w=(r,t)=>{A.mixin({buttonsStyling:!0}).fire({title:"Seguro de eliminar el grupo "+r+" "+t,text:"Se perderá el grupo",icon:"question",showCancelButton:!0,confirmButtonText:'<i class="fa-solid fa-check"></i> Si, eliminar',cancelButtonText:'<i class="fa-solid fa-ban"></i>No, Cancelar'}).then(c=>{c.isConfirmed&&p.Inertia.delete(`/grupo/${r}`,{onSuccess:()=>{alert("grupo eliminado exitosamente.")},onError:C=>{console.error("Error al eliminar el grupo:",C)}})})};function s(r){const{name:t,value:h}=r.target;d(c=>({...c,[t]:h}))}return e.jsx(L,{auth:o.auth,errors:o.errors,children:e.jsxs("div",{className:"p-6",children:[x!=="User"&&e.jsx(e.Fragment,{children:e.jsx("button",{className:"bg-blue-500 text-white px-4 py-1 rounded mb-4",onClick:()=>m(1),children:" Crear Grupo"})}),e.jsx(T,{href:"/mimenu",className:"bg-green-500 text-white px-4 py-1 mx-4 rounded mb-4",children:" Regreso"}),e.jsx("span",{className:"bg-blue-100",children:" GRUPOS DE POSTS"}),e.jsxs("div",{className:"bg-white grid v-screen place-items-center py-1",children:[e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-2 py-1",children:"#"}),e.jsx("th",{className:"px-2 py-1",children:"TITULO"}),e.jsx("th",{className:"px-2 py-1",children:"DETALLE"}),e.jsx("th",{className:"px-2 py-1",children:"ESTADO"}),e.jsx("th",{className:"px-2 py-1",colSpan:2})]})}),e.jsx("tbody",{children:o.grupos.data.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:r.id}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:r.grp_titulo}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:r.grp_detalle}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:r.grp_estado}),x!=="User"&&e.jsxs(e.Fragment,{children:[" ",e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("button",{className:"bg-yellow-500 text-white px-2 py-1 rounded",onClick:()=>{d(r),m(0)},children:"Editar"})}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-1 rounded",onClick:()=>w(r.id,r.grp_titulo),children:"Eliminar"})})]})]},r.id))})]}),e.jsx(O,{class:"mt-6",links:o.grupos.links})]}),e.jsxs(M,{show:b,onClose:_,children:[e.jsx("h2",{className:"p-3 text-lg font-medium text-gray-900",children:j}),e.jsx("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto transform transition-all duration-300 ease-in-out scale-100",children:e.jsx("form",{onSubmit:S,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(g,{Id:"grp_titulo",Type:"text",Label:"Titulo Grupo",onChange:s,classNameI:"md:col-span-2",maxLength:"100",data:a.grp_titulo,required:!0,OnChange:s}),e.jsx(g,{Id:"grp_detalle",Type:"text",Label:"Detalles",onChange:s,classNameI:"md:col-span-2",maxLength:"150",data:a.grp_detalle,required:!0,OnChange:s}),e.jsx(D,{Id:"grp_estado",Label:"Estado",data:a.grp_estado,options:v,OnChange:s,required:!0}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-1 rounded",onClick:()=>l(!1),children:"Cancelar"}),e.jsx("button",{processing:N,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold mx-3 py-1 px-1 rounded",children:"Guardar"})]})]})})})]})]})})}export{W as default};
